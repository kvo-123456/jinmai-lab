import{aD as S,C as r,bB as $,c as e,aO as f,bb as K,b7 as E,b8 as B,b9 as y,ba as q,bc as p,aP as z,aQ as D,aR as h}from"./index-DvRCDgMZ.js";function _(){const{isDark:s}=S(),[d,w]=r.useState("把麻花做成赛博朋克风"),[c,v]=r.useState("桂发祥麻花传统工艺强调多褶形态、香酥口感与津味表达"),m=$(d,c),[o,N]=r.useState(()=>{try{const t=localStorage.getItem("AUTH_FEEDBACK_ACKS");return t?JSON.parse(t):{}}catch{return{}}});r.useEffect(()=>{try{localStorage.setItem("AUTH_FEEDBACK_ACKS",JSON.stringify(o))}catch{}},[o]);const C=t=>{N(l=>({...l,[t]:!l[t]}))},x=r.useMemo(()=>{const t=a=>a.toLowerCase().split(/[^a-zA-Z0-9\u4e00-\u9fa5]+/).filter(Boolean),l=t(d),u=t(c),i={},n={};l.forEach(a=>i[a]=(i[a]||0)+1),u.forEach(a=>n[a]=(n[a]||0)+1);const g=Array.from(new Set([...l,...u])),b=g.filter(a=>(i[a]||0)&&(n[a]||0)),k=g.filter(a=>(i[a]||0)&&!n[a]),A=g.filter(a=>(n[a]||0)&&!i[a]);return{top:b.map(a=>({token:a,input:i[a],knowledge:n[a]})).sort((a,j)=>j.input+j.knowledge-(a.input+a.knowledge)).slice(0,10),commonCount:b.length,uniqueA:k.length,uniqueB:A.length}},[d,c]);return e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900 text-white":"bg-white text-gray-900"}`,children:e.jsxs("main",{className:"container mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"纯正性检查与评分"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-2",children:"输入内容"}),e.jsx("textarea",{value:d,onChange:t=>w(t.target.value),className:`${s?"bg-gray-700 text-white":"bg-gray-50 text-gray-900"} w-full h-32 px-4 py-3 rounded-lg border`,autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send",inputMode:"text"})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-2",children:"知识库内容"}),e.jsx("textarea",{value:c,onChange:t=>v(t.target.value),className:`${s?"bg-gray-700 text-white":"bg-gray-50 text-gray-900"} w-full h-32 px-4 py-3 rounded-lg border`,autoCapitalize:"none",autoCorrect:"off",enterKeyHint:"send",inputMode:"text"})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-2",children:"评分"}),e.jsx("div",{className:"text-3xl font-bold",children:m.score}),e.jsx("div",{className:"mt-3 text-sm",children:"阈值≥70%"}),e.jsx("ul",{className:"mt-3 text-sm",children:m.feedback.map((t,l)=>e.jsxs("li",{className:"mb-2 flex items-center justify-between",children:[e.jsx("span",{children:t}),e.jsx("button",{onClick:()=>C(t),className:`text-xs px-3 py-2 rounded-full min-h-[44px] ${o[t]?"bg-green-600 text-white":s?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-700"}`,children:o[t]?"已优化":"标记已优化"})]},l))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8",children:[e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-4 font-medium",children:"共同关键词频次对比"}),e.jsx("div",{style:{width:"100%",height:280},children:e.jsx(f,{children:e.jsxs(K,{data:x.top,children:[e.jsx(E,{dataKey:"token",tick:{fontSize:12}}),e.jsx(B,{}),e.jsx(y,{}),e.jsx(q,{}),e.jsx(p,{dataKey:"input",fill:"#f87171",name:"输入"}),e.jsx(p,{dataKey:"knowledge",fill:"#60a5fa",name:"知识库"})]})})})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl shadow-md p-6`,children:[e.jsx("div",{className:"mb-4 font-medium",children:"关键词组成比例"}),e.jsx("div",{style:{width:"100%",height:280},children:e.jsx(f,{children:e.jsxs(z,{children:[e.jsxs(D,{dataKey:"value",data:[{name:"共同",value:x.commonCount},{name:"仅输入",value:x.uniqueA},{name:"仅知识库",value:x.uniqueB}],outerRadius:100,label:!0,children:[e.jsx(h,{fill:"#34d399"}),e.jsx(h,{fill:"#f87171"}),e.jsx(h,{fill:"#60a5fa"})]}),e.jsx(y,{})]})})})]})]})]})})}export{_ as default};
