import{aD as k,C as l,c as a}from"./index-DvRCDgMZ.js";function $({accept:d,onFile:u,title:m,description:x,previewUrl:f,variant:s="file",className:v}){const{isDark:t}=k(),n=l.useRef(null),[p,h]=l.useState(""),[b,c]=l.useState(!1),g=l.useCallback(e=>{if(e){try{if(s==="image"||s==="audio"){const r=URL.createObjectURL(e);h(r)}}catch{}u(e)}},[u,s]),j=e=>{var r;const o=(r=e.target.files)==null?void 0:r[0];g(o)},N=e=>{var r;e.preventDefault(),e.stopPropagation(),c(!1);const o=(r=e.dataTransfer.files)==null?void 0:r[0];g(o)},y=e=>{e.preventDefault(),e.stopPropagation(),c(!0)},D=e=>{e.preventDefault(),e.stopPropagation(),c(!1)},i=f||p,w=s==="image"?"far fa-image":s==="audio"?"fas fa-music":"fas fa-file-import",C=t?"ring-red-500/40 hover:ring-red-500/60":"ring-red-600/40 hover:ring-red-600/60";return a.jsxs("div",{className:v,children:[m&&a.jsx("div",{className:"mb-2 text-sm font-medium",children:m}),a.jsxs("div",{onDrop:N,onDragOver:y,onDragLeave:D,className:`relative rounded-2xl border-2 border-dashed ${t?"border-gray-600 bg-gray-800":"border-gray-300 bg-white"} p-4 transition-all ${b?C:"ring-0"} cursor-pointer`,onClick:()=>{var e;return(e=n.current)==null?void 0:e.click()},role:"button","aria-label":"上传文件",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl ${t?"bg-gray-700 text-white":"bg-gray-100 text-gray-900"} mr-4`,children:a.jsx("i",{className:w})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm",children:x||"拖拽文件到此，或点击选择"}),a.jsx("div",{className:`text-xs mt-0.5 ${t?"text-gray-400":"text-gray-500"}`,children:d})]}),a.jsx("button",{type:"button",className:"ml-4 px-3 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white text-sm",onClick:e=>{var r;e.stopPropagation(),(r=n.current)==null||r.click()},children:"选择文件"})]}),s==="image"&&i&&a.jsx("div",{className:"mt-4",children:a.jsx("img",{src:i,alt:"预览",className:"w-full h-40 object-cover rounded-lg",loading:"lazy",decoding:"async"})}),s==="audio"&&i&&a.jsx("div",{className:"mt-4",children:a.jsx("audio",{controls:!0,src:i,className:"w-full"})})]}),a.jsx("input",{ref:n,type:"file",accept:d,className:"hidden",onChange:j})]})}export{$ as C};
